<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Diagnostic Final 2026</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-900 text-white p-6 font-mono text-xs">
    <h1 class="text-amber-500 text-lg mb-4">üîç Diagnostic des Mod√®les Accessibles</h1>
    
    <button onclick="scanner()" class="w-full bg-blue-600 p-4 rounded-xl font-bold text-white mb-6">
        LANCER LE SCAN DES MOD√àLES
    </button>

    <div id="logs" class="bg-black p-4 rounded-lg border border-slate-700 min-h-[300px] overflow-auto">
        > En attente du scan...
    </div>

    <script>
        const KEY = localStorage.getItem('BOITE_FINAL_KEY_2026');

        function log(msg, color = "text-blue-400") {
            document.getElementById('logs').innerHTML += `<div class="${color}">> ${msg}</div>`;
        }

        async function scanner() {
            log("Interrogation de Google Cloud...");
            
            // On demande la liste des mod√®les √† laquelle la cl√© a acc√®s
            const url = `https://generativelanguage.googleapis.com/v1beta/models?key=${KEY}`;
            
            try {
                const response = await fetch(url);
                const data = await response.json();

                if (response.ok) {
                    log("‚úÖ CONNEXION R√âUSSIE !", "text-green-400");
                    log("Voici les mod√®les disponibles pour ton compte :", "text-white mt-2");
                    
                    if (data.models && data.models.length > 0) {
                        data.models.forEach(m => {
                            log(`- ${m.name} (${m.displayName})`, "text-amber-300");
                        });
                        log("\nConseil : Copie le nom exact (ex: models/gemini-1.5-pro) pour ton application.", "text-white");
                    } else {
                        log("‚ö†Ô∏è AUCUN MOD√àLE TROUV√â. Ton API est active mais ton projet est vide.", "text-orange-400");
                    }
                } else {
                    log("‚ùå ERREUR GOOGLE", "text-red-500");
                    log("Code : " + response.status);
                    log("Message : " + data.error.message);
                    log("Raison : " + data.error.status);
                }
            } catch (e) {
                log("ERREUR R√âSEAU : " + e.message, "text-red-500");
            }
        }
    </script>
</body>
</html>